---
name: random-data-api
structure:
  - title: d3fc-random-data
    level: 1
    content: "Components for generating random data series based on stochastic processes.\r\n\r\n"
    children:
      - title: API Reference
        level: 2
        content: "* [Financial](#financial)\n* [Financial Stream](#financial-stream)\n* [Geometric Brownian Motion](#geometric-brownian-motion)\r\n\r\n### Financial\r\n\r\nThe random financial data generator component generates open-high-low-close-volume financial data.\r\nPrices are calculated using the [geometric Brownian motion generator](#geometric-brownian-motion).\r\n\r\n```javascript\r\n\r\nimport { randomFinancial, randomSkipWeekends } from 'd3fc-random-data';\r\n\r\nconst generator = randomFinancial()\r\n    .startDate(new Date(2016, 0, 1))\r\n    .startPrice(100)\r\n    .filter(randomSkipWeekends)\r\n\r\ngenerator(4)\r\n\r\n// [\r\n//   {\r\n//     date: 2016-01-01T00:00:00.000Z,\r\n//     open: 100,\r\n//     high: 100.37497903455065,\r\n//     low: 99.9344064016257,\r\n//     close: 100.13532170178823,\r\n//     volume: 974\r\n//   },\r\n//   {\r\n//     date: 2016-01-04T00:00:00.000Z,\r\n//     open: 100.2078374019404,\r\n//     high: 100.55251268471399,\r\n//     low: 99.7272105851512,\r\n//     close: 99.7272105851512,\r\n//     volume: 992\r\n//   },\r\n//   {\r\n//     date: 2016-01-05T00:00:00.000Z,\r\n//     open: 99.7272105851512,\r\n//     high: 101.06403178230532,\r\n//     low: 99.7272105851512,\r\n//     close: 101.00200313600685,\r\n//     volume: 835\r\n//   },\r\n//   {\r\n//     date: 2016-01-06T00:00:00.000Z,\r\n//     open: 101.00200313600685,\r\n//     high: 101.41129520567128,\r\n//     low: 100.50311227829566,\r\n//     close: 100.5536971451326,\r\n//     volume: 1021\r\n//   }\r\n// ]\r\n\r\n```\n\n<a name=\"rf\" href=\"#rf\">#</a> fc.**randomFinancial**()\r\n\r\nConstructs a new financial data generator.\r\n\r\n<a name=\"rf_\" href=\"#rf_\">#</a> *randomFinancial*(*points*)\r\n\r\nRun the generator. Returns an array with *points* number of objects with `date`, `open`, `high`, `low`, `close` and `volume` properties.\r\n\r\n<a name=\"rf_startDate\" href=\"#rf_startDate\">#</a> *randomFinancial*.**startDate**([*value*])\r\n\r\nIf *value* is specified, sets the start date to the specified `Date` object and returns this generator instance.\r\nIf *value* is not specified, returns the current start date, which defaults to the value of `new Date()` when the generator was constructed.\r\n\r\n<a name=\"rf_startPrice\" href=\"#rf_startPrice\">#</a> *randomFinancial*.**startPrice**([*value*])\r\n\r\nIf *value* is specified, sets the start price to the specified number and returns this generator instance.\r\nIf *value* is not specified, returns the current start price, which defaults to `100`.\r\n\r\n<a name=\"rf_interval\" href=\"#rf_interval\">#</a> *randomFinancial*.**interval**([*value*])\r\n\r\nIf *value* is specified, sets the time increment to the specified [d3 time interval](https://github.com/d3/d3-time#intervals) and returns this generator instance.\r\nIf *value* is not specified, returns the current interval, which defaults to `d3_time.timeDay`.\r\n\r\n<a name=\"rf_intervalStep\" href=\"#rf_intervalStep\">#</a> *randomFinancial*.**intervalStep**([*value*])\r\n\r\nIf *value* is specified, sets the number of intervals that returned points should have dates offset by to the specified integer number and returns this generator instance.\r\nIf *value* is not specified, returns the current number of intervals, which defaults to `1`.\r\nInternally, this value is supplied to the *step* argument of an interval's [offset function](https://github.com/d3/d3-time#interval_offset).\r\n\r\n<a name=\"rf_steps\" href=\"#rf_steps\">#</a> *randomFinancial*.**steps**([*value*])\r\n\r\nGet/Set the number of [steps used by the geometric Brownian motion simulation](#gbm_steps) per *intervalStep* number of intervals.\r\nA higher number gives a slower, but higher resolution simulation.\r\n\r\n<a name=\"rf_mu\" href=\"#rf_mu\">#</a> *randomFinancial*.**mu**([*value*])\r\n\r\nGet/Set the [drift used by the geometric Brownian motion simulation](#gbm_mu).  \r\n\r\n<a name=\"rf_sigma\" href=\"#rf_sigma\">#</a> *randomFinancial*.**sigma**([*value*])\r\n\r\nGet/Set the [volatility used by the geometric Brownian motion simulation](#gbm_sigma).  \r\n\r\n<a name=\"rf_unitInterval\" href=\"#rf_unitInterval\">#</a> *randomFinancial*.**unitInterval**([*value*])\r\n\r\nIf *value* is specified, sets the time interval used for units of *mu* and *sigma* to the specified [d3 time interval](https://github.com/d3/d3-time#intervals) and returns this generator instance.\r\nIf *value* is not specified, returns the current interval, which defaults to `d3_time.timeYear`.\r\n\r\n<a name=\"rf_unitIntervalStep\" href=\"#rf_unitIntervalStep\">#</a> *randomFinancial*.**unitIntervalStep**([*value*])\r\n\r\nIf *value* is specified, sets the integer number of intervals used for units of *mu* and *sigma* to the specified number and returns this generator instance.\r\nIf *value* is not specified, returns the current interval, which defaults to `1`.\r\nFor example, to have trading year units of *mu* and *sigma* rather than calendar year, set *unitIntervalStep* to `252` and *unitInterval* to `d3_time.timeDay`.\r\n\r\n<a name=\"rf_volume\" href=\"#rf_volume\">#</a> *randomFinancial*.**volume**([*value*])\r\n\r\nIf *value* is specified, sets the function used return a point's volume to the specified function and returns this generator instance.\r\nCan be specified as either a function mapping an output object to a number, or a number.\r\nIf *value* is not specified, returns the current volume, which defaults to a function sampling integers from a normal distribution centred around `1000`.\r\n\r\n<a name=\"rf_filter\" href=\"#rf_filter\">#</a> *randomFinancial*.**filter**([*value*])\r\n\r\nIf *value* is specified, sets the filter function to the specified function and returns this generator instance.\r\nOnly output objects `d` for which `filter(d)` returns `true` will be included in the output array.\r\nIf *value* is not specified, returns the current filter function, which defaults to `(d) => true`.\r\nTo skip weekends, supply the pre-defined filter `fc_random_data.skipWeekends`.\r\n\r\n\n### Financial Stream\r\n\r\nUse the streaming interface to have successive calls to generate data keep track of the latest date and price.\r\n\r\n```javascript\r\n\r\nimport { randomFinancial } from 'd3fc-random-data';\r\n\r\nconst generator = financial()\r\n    .startDate(new Date(2016, 0, 1))\r\n    .startPrice(100)\r\n\r\nconst stream = generator.stream();\r\nconst data = [];\r\n\r\ndata.push(stream.next());\r\n// data.length -> 1\r\n\r\ndata = data.concat(stream.take(2));\r\n// data.length -> 3\r\n\r\ndata = data.concat(stream.until(d => d.date > new Date(2016, 0, 10)));\r\n// data.length -> 10\r\n\r\n```\r\n\r\n<a name=\"rf_stream\" href=\"#rf_stream\">#</a> *randomFinancial*.**stream**()\r\n\r\nConstructs a new stream from an existing financial data generator instance.\r\n\r\n<a name=\"stream_next\" href=\"#stream_next\">#</a> *stream*.**next**()\r\n\r\nReturns a single output object with date incremented from the latest returned output object's date according to the generator instance's *interval* and *intervalStep* properties, or with *startDate* if this is the first call.\r\n\r\n<a name=\"stream_take\" href=\"#stream_take\">#</a> *stream*.**take**(number)\r\n\r\nReturns an array of length *number* of output objects, each object with date incremented according to the generator instance's *interval* and *intervalStep* properties, starting with the latest returned output objects's incremented date, or with *startDate* if this is the first call.\r\n\r\n<a name=\"stream_until\" href=\"#stream_until\">#</a> *stream*.**until**(comparison)\r\n\r\nReturns the array of objects constructed by repeatedly generating a single output object with date incremented according to the generator instance's *interval* and *intervalStep* properties until a generated object satisfies the condition of the supplied comparison function, appending to the output array only if the condition is not satisfied.\n\n\r\n### Geometric Brownian Motion\r\n\r\nThe geometric Brownian motion component creates a series of values based on the [Geometric Brownian Motion](https://en.wikipedia.org/wiki/Geometric_Brownian_motion) stochastic process.\r\n\r\n``` javascript\r\n\r\nimport { randomGeometricBrownianMotion } from 'd3fc-random-data';\r\n\r\nconst generator = randomGeometricBrownianMotion()\r\n    .steps(10);\r\n\r\ngenerator(10);\r\n\r\n// [\r\n//   10,\r\n//   10.272847363463436,\r\n//   10.423881104466574,\r\n//   10.629316182766384,\r\n//   10.7209321393133,\r\n//   10.773722182206432,\r\n//   10.229636144307582,\r\n//   10.225282323984114,\r\n//   10.488138829847468,\r\n//   10.428118194568341,\r\n//   10.848822656937935\r\n// ]\r\n\r\n```\r\n\r\n<a name=\"rgbm\" href=\"#rgbm\">#</a> fc.**randomGeometricBrownianMotion**()\r\n\r\nConstructs a new geometric Brownian motion generator.\r\n\r\n<a name=\"rgbm_\" href=\"#rgbm_\">#</a> *randomGeometricBrownianMotion*(*start*)\r\n\r\nReturns an array of price values following a geometric Brownian motion with the set drift and volatility, given a starting price of *start*.\r\nThe first array value is the supplied start price, followed by *steps* number of values corresponding to the simulated price value at the end of each step.\r\n\r\n<a name=\"rgbm_mu\" href=\"#rgbm_mu\">#</a> *randomGeometricBrownianMotion*.**mu**([*value*])\r\n\r\nIf *value* is specified, sets the percentage drift per period to the specified number and returns this generator instance.\r\nIf *value* is not specified, returns the current drift, which defaults to `0.1`.\r\n\r\n<a name=\"rgbm_sigma\" href=\"#rgbm_sigma\">#</a> *randomGeometricBrownianMotion*.**sigma**([*value*])\r\n\r\nIf *value* is specified, sets the percentage volatility per period to the specified number and returns this generator instance.\r\nIf *value* is not specified, returns the current volatility, which defaults to `0.1`.\r\n\r\n<a name=\"rgbm_period\" href=\"#rgbm_period\">#</a> *randomGeometricBrownianMotion*.**period**([*value*])\r\n\r\nIf *value* is specified, sets the interval length to the specified number of periods and returns this generator instance.\r\nIf *value* is not specified, returns the current interval length, which defaults to `1`.\r\n\r\n<a name=\"rgbm_steps\" href=\"#rgbm_steps\"></a> *randomGeometricBrownianMotion*.**steps**([*value*])\r\n\r\nIf *value* is specified, sets the number of discrete steps to divide the interval into to the specified number and returns this generator instance.\r\nIf *value* is not specified, returns the current number of steps, which defaults to `20`.\r\n\r\n<a name=\"rgbm_randomNormal\" href=\"#rgbm_randomNormal\"></a> *randomGeometricBrownianMotion*.**randomNormal**([*value*])\r\n\r\nIf *value* is specified, sets the function used for generating random numbers with a normal (Gaussian) distribution to the specified function and returns this generator instance.\r\nIf *value* is not specified, returns the current random normal function, which defaults to [`d3_random.randomNormal`](https://github.com/d3/d3-random#randomNormal).\r\n"
layout: api
section: api
title: Random Data

---
